import{escapeHtml as s}from"@mdit/helper";import{tex as g}from"@mdit/plugin-tex";let p=!0,n;try{n=(await import("katex")).default}catch{/* istanbul ignore next -- @preserve */p=!1}const x=(t,a,o)=>{let r;try{r=n.renderToString(t,{...a,displayMode:!1})}catch(e){/* istanbul ignore else -- @preserve */if(e instanceof n.ParseError)console.warn(e),r=`<span class='katex-error' title='${s(e.toString())}'>${s(t)}</span>`;else throw e}return o?.(r,!1)??r},y=(t,a,o)=>{let r;try{r=`<p class='katex-block'>${n.renderToString(t,{...a,displayMode:!0})}</p>
`}catch(e){/* istanbul ignore else -- @preserve */if(e instanceof n.ParseError)console.warn(e),r=`<p class='katex-block katex-error' title='${s(e.toString())}'>${s(t)}</p>
`;else throw e}return o?.(r,!0)??r},S=async()=>{await import("katex/contrib/mhchem")},$=(t,a={})=>{/* istanbul ignore if -- @preserve */if(!p){console.error('[@mdit/plugin-katex]: "katex" not installed!');return}const{allowInlineWithSpace:o=!1,mathFence:r=!1,logger:e=l=>l==="newLineInDisplayMode"?"ignore":"warn",macros:f={},transformer:c,...m}=a;t.use(g,{allowInlineWithSpace:o,mathFence:r,render:(l,d,h)=>{const i={strict:(w,k,u)=>e(w,k,u,h)??"ignore",macros:f,throwOnError:!1,...m};return d?y(l,i,c):x(l,i,c)}})};export{$ as katex,S as loadMhchem};
//# sourceMappingURL=index.js.map
