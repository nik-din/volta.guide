import{useLocaleConfig as S}from"@vuepress/helper/client";import{useMediaQuery as C,watchImmediate as L,useClipboard as A,useEventListener as w}from"@vueuse/core";import{computed as x}from"vue";import{onContentUpdated as _}from"vuepress/client";import"./styles/copy-code.css";import"./styles/vars.css";const M=/language-(shellscript|shell|bash|sh|zsh)/,U=({duration:a=2e3,locales:d,selector:m,showInMobile:b,ignoreSelector:l=[],transform:i})=>{if(__VUEPRESS_SSR__)return;const f=C("(max-width: 419px)"),s=x(()=>!f.value||b),u=S(d),y=t=>{if(t.hasAttribute("copy-code"))return;const e=document.createElement("button");e.type="button",e.classList.add("vp-copy-code-button"),e.setAttribute("aria-label",u.value.copy),e.setAttribute("data-copied",u.value.copied),t.parentElement?.insertBefore(e,t),t.setAttribute("copy-code","")},p=()=>{document.body.classList.toggle("no-copy-code",!s.value),s.value&&document.querySelectorAll(m.join(",")).forEach(y)};L(s,p,{flush:"post"}),_(t=>{t!=="beforeUnmount"&&p()});const{copy:g}=A({legacy:!0}),c=new WeakMap,h=async(t,e,o)=>{const n=e.cloneNode(!0);l.length&&n.querySelectorAll(l.join(",")).forEach(E=>{E.remove()}),i&&i(n);let r=n.textContent||"";if(M.test(t.className)&&(r=r.replace(/^ *(\$|>) /gm,"")),await g(r),a<=0)return;o.classList.add("copied"),clearTimeout(c.get(o));const v=setTimeout(()=>{o.classList.remove("copied"),o.blur(),c.delete(o)},a);c.set(o,v)};w("click",t=>{const e=t.target;if(s.value&&e.matches('div[class*="language-"] > button.vp-copy-code-button')){const o=e.parentElement,n=e.nextElementSibling;if(!o||!n)return;h(o,n,e)}})};export{U as u};
//# sourceMappingURL=useCopyCode-Dshq2Xw3.js.map
